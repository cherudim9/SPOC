#01-2-spoc-answer

##个人思考题

####分析你所认识的操作系统（Windows、Linux、FreeBSD、Android、iOS）所具有的独特和共性的功能？

共性功能：

Windows的独特功能：

####请总结你认为操作系统应该具有的特征有什么？并对其特征进行简要阐述。

####请给出你觉得的更准确的操作系统的定义？

####你希望从操作系统课学到什么知识？

####什么是操作系统？

####操作系统内核有什么特征？

####操作系统面临什么挑战？

####同学们用过什么操作系统？如何评价这些系统？

####你所知道的操作系统技术有什么？哪些是操作系统特有的？

####什么是操作系统内核？什么是微内核？什么是外核（Exokernel）？

####你理解的虚拟化是什么？


##小组讨论题

####目前的台式PC机标准配置和价格？

华硕K30BF-A1054M1（3799元）

主板芯片组：AMD A55

CPU：AMD A10-6700（3.7GHz，四核心）

内存容量：4GB DDR3

显卡：AMD Radeon R5 235

####你理解的命令行接口和GUI接口具有哪些共性和不同的特征？

共性：命令行接口和GUI接口都能完成操作系统的大部分操作；因为他们本质上都是操作系统给上层用户提供的接口；

命令行接口的特征：接口更统一，只需用字符输入即可完成操作

GUI接口：操作更加直观、更加注重人机交互、更方便应用程序的使用；但是操作不够统一，

####为什么现在的操作系统基本上用C语言来实现？

####为什么没有人用python，java来实现操作系统？

####请评价用C++来实现操作系统的利弊？

##v9-cpu相关题目

####在v9-cpu中如何实现时钟中断的

可以通过TIME指令设置`timeout`变量；

在每个指令周期内，给`timer`变量加`delta`；若`timeout`不为0并且`timer`超过`timeout`，那么进入时钟中断，并恢复`timer`为0。

####v9-cpu指令，关键变量描述有误或不全的情况

####在v9-cpu中的跳转相关操作是如何实现的

对于JMP/JMPI指令，只需把`xpc`加上opperand0等操作数即可；

对于JSR/JSRA指令，先在栈中保存当前的pc值，再跳转；

对于BRANCH指令，先完成条件判断，再根据判断结果进行跳转。

####在v9-cpu中如何设计相应指令，可有效实现函数调用与返回

函数调用前，可以把所有参数放在栈底：`sp`,`sp-4`,`sp-8`,...,`sp-x`。调用后，设置了新的`sp`，因此对应的参数可以通过访问`sp`,`sp+4`,`sp+8`,...,`sp+x`得到。返回值也同理。

####emhello/os0/os1等程序被加载到内存的哪个位置,其堆栈是如何设置的

	if (read(f, (void*)mem, st.st_size - sizeof(hdr)) != st.st_size - sizeof(hdr)) 
	{ 
		dprintf(2,"%s : failed to read file %sn", cmd, file); return -1; 
	}
	close(f);
	
1. 根据这一行可看出**程序**被加载到内存的起始处；
2. 如果用`-f`选项，可以加载外部的文件系统(RAM)到内存的末尾；
3. 栈底被设置为内存的末尾减去RAM文件的大小（比如，默认的情况下sp=128MB-4MB=124MB）。

####在v9-cpu中如何完成一次内存地址的读写的
比如在`cpu()`函数中的某一行：

	case LBXF:
		if (!(p = tr[(v = b + (ir>>8)) >> 12]) && !(p = rlook(v)))
			break;
		g = *(float *)  ((v ^ p) & -4);
		continue;

可以看到，比如说要访问虚拟地址为`b + (ir>>8)`的内存，那么先右移12位得到虚页号，然后：

1. 在当前页表`tr`中寻找`v`（虚页号）有没有对应的物理地址：如果有，返回之；如果没有，执行第2点；
2. 在`rlook()`函数（**请查看源代码**）中，如果存在虚页映射（判断了`paging`），那么：首先根据访存地址的高10位得到`page directory entry (pde)`，该项对应着一个页表`page table`；然后在`page table`中根据访存地址的中间10位找到对应的`page table entry (pte)`；得到内存页之后就很简单了，调用`setpage()`函数对`tr`、`tw`进行修改即可。

注意，`tr`，`tw`中存的物理地址是**真实的物理地址+1**.

对内存地址的写同理，主要使用了`wlook()`这个函数。

####在v9-cpu中如何实现分页机制





